<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Highway RoadMap: Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Highway RoadMap
   </div>
   <div id="projectbrief">Highway RoadMap (HRM) planning framework using closed-form Minkowski sums for robots with ellipsoidal components</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Documentation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_readme"></a>A paradigm for robot motion planning based on parameterizations of the free space</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Description</h1>
<p >We develop a motion planning paradigm based on the closed-form Minkowski sum and difference between ellipsoid and general obstacle (bounded as a convex differentiable surface, i.e. superquadrics). This repository is the C++ implementation of algorithms and benchmarks. The algorithms includes: Highway RoadMap (HRM) for both SE(2) and SE(3) rigid body planning problems, Hybrid Probabilistic Highway RoadMap (HP-HRM) for articulated body planning problems and Closed-Form Collision-Free ConFiguration (CF3) sampler for sampling-based planners. The algorithms have been compared with sampled-based planners from OMPL. The benchmark results show that our proposed methods outperform the sample-based planners (i.e. PRM, RRT, RRT-Connect, etc) especially in the narrow-passage problems.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Dependencies</h1>
<ul>
<li><a href="https://ompl.kavrakilab.org/installation.html">OMPL</a> (version &gt;= 1.5.0): Open Motion Planning Library for sample-based planners</li>
<li><a href="https://github.com/flexible-collision-library/fcl">FCL</a> (version = 0.6.0): Flexible Collision Library for collision detection</li>
<li><a href="https://www.cgal.org/">CGAL</a> (version &gt;= 5.2.1): Mesh generation as a pre-process</li>
<li><a href="https://orocos.org/wiki/orocos/kdl-wiki.html">KDL</a>: Kinematics and Dynamics Library for operations on kinematic chains</li>
<li><a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen</a> (version &gt;= 3.3.0)</li>
<li><a href="https://www.boost.org/">Boost</a> (version = 1.71.0)</li>
<li><a href="https://github.com/google/googletest">google-test</a> (version &gt;= 1.10.x)</li>
<li>(Optional) <a href="http://wiki.ros.org/kdl_parser">KDL-parser</a>: Parser from URDF to KDL</li>
<li>[cmake-format] (version &gt;= 0.4.5) <div class="fragment"><div class="line">sudo pip3 install cmake-format==0.4.5</div>
</div><!-- fragment --></li>
<li>[clang-format] <div class="fragment"><div class="line">sudo apt install clang</div>
</div><!-- fragment --></li>
<li>[Cppcheck] <div class="fragment"><div class="line">sudo apt install cppcheck</div>
</div><!-- fragment --></li>
</ul>
<p ><b>Note</b>:</p><ul>
<li>We provide an installation script for dependencies: <code>/script/install-dependencies.sh</code>. Exectuting it will automatically install all the required dependencies.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Compiling Instructions</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
On Local Host</h2>
<p >This is a standard CMake project, so compiling using the standard way of building is fine, i.e. from the root folder do the following commands: </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ../</div>
<div class="line">make</div>
</div><!-- fragment --><p> The compilations are tested on Ubuntu 16.04, 18.04 and 20.04 systems using CMake (&gt;= 3.5).</p>
<h2><a class="anchor" id="autotoc_md5"></a>
On Docker (Recommended)</h2>
<div class="fragment"><div class="line"># Pull directory onto your localhost</div>
<div class="line">cd $HOME &amp;&amp; mkdir HighwayRoadMap_WS</div>
<div class="line">cd HighwayRoadMap_WS &amp;&amp; git clone git@github.com:ruansp/HighwayRoadMap.git</div>
<div class="line"> </div>
<div class="line"># Fetch docker image from remote and launch it locally (No need to build the image locally)</div>
<div class="line">./HighwayRoadMap/script/start-doker.sh</div>
<div class="line"> </div>
<div class="line"># Build the project inside the docker container</div>
<div class="line">cd HighwayRoadMap_WS</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake -G Ninja ../HighwayRoadMap</div>
<div class="line">ninja -j 9</div>
</div><!-- fragment --><p ><b>Note</b>:</p><ul>
<li>If you have installed OMPL from ROS, please make sure that its version is higher than 1.5.0, otherwise some features used in benchmark files might not be available. To link correct OMPL, you might need to add prefix when compiling, i.e. <code>cmake ../ -DOMPL_PREFIX=/your/ompl/include/dir</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Testing Instructions</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Generate configuration files</h2>
<p >Configuration files for environment and robot when testing the C++ scripts are all stored in <code>/config</code> folder, including (3D cases as an example) <code>arena_config_3D.csv</code>, <code>obs_config_3D.csv</code>. <code>robot_config_3D.csv</code> and <code>end_points_3D.csv</code>. Configuration files for demostrations are provided in <code>/config/demo/</code> folder. In the repository, there are pre-defined configurations in these files, stored in <code>/resources/</code> folder. To customize different robot or environment configurations, simply run the Matlab scripts <code>/matlab/tests/planning_config_3D.m</code>, and change different parameters that defines the geometric shapes of the obstacles and robots.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Running unit tests</h2>
<p >Testing files are located in <code>/test</code> folder:</p><ul>
<li>2D HRM planner for single-body: <code>TestHRM2D.cpp</code></li>
<li>3D HRM planner for multi-rigid-body: <code>TestHRM3D.cpp</code></li>
<li>3D Prob-HRM planner for articulated-body: <code>TestProbHRM3D.cpp</code></li>
<li>Geometric subroutines: <code>TestGeometry.cpp</code></li>
</ul>
<p ><b>Command line arguments</b>: </p><div class="fragment"><div class="line">cd build/</div>
<div class="line">ctest</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Benchmarks</h2>
<p >Benchmark files are stored in <code>/test/benchmark/</code> folder:</p><ul>
<li>2D HRM planner for single-body: <code>BenchHRM2D.cpp</code> <div class="fragment"><div class="line"># Parameters: --Num of trials --Num of layers --Num of sweep lines --Configuration file prefix</div>
<div class="line">./BenchHRM2D 1 20 30 ${SOURCE_DIR}/config/</div>
</div><!-- fragment --></li>
<li>3D HRM planner for multi-body: <code>BenchHRM3D.cpp</code> <div class="fragment"><div class="line"># Parameters: --Num of trials --Num of layers --Num of sweep lines (x-direction) --Num of sweep lines (y-direction) --Max planning time --Configuration file prefix --Pre-defined quaternions file prefix (if no, enter 0 or leave blank)</div>
<div class="line">./BenchHRM3D 1 60 6 3 60.0 ${SOURCE_DIR}/config/demo/ ${SOURCE_DIR}/resources/SO3_sequence/q_icosahedron</div>
</div><!-- fragment --></li>
<li>3D HRM planner for multi-body (ablated version, without "bridge C-slice" process): <code>BenchHRM3DAblation.cpp</code> <div class="fragment"><div class="line"># Parameters: --Num of trials --Num of layers --Num of sweep lines (x-direction) --Num of sweep lines (y-direction) --Max planning time --Configuration file prefix --Pre-defined quaternions file prefix (if no, enter 0 or leave blank)</div>
<div class="line">./BenchHRM3DAblation 1 60 6 3 60.0 ${SOURCE_DIR}/config/demo/ ${SOURCE_DIR}/resources/SO3_sequence/q_icosahedron</div>
</div><!-- fragment --></li>
<li>3D Prob-HRM planner for articulated-body: <code>BenchProbHRM3D.cpp</code> <div class="fragment"><div class="line"># Parameters: --Num of trials --Num of trials --robot name --Num of sweep lines (x-direction) --Num of sweep lines (y-direction) --Max planning time (in seconds, default: 60.0s) --Configuration file prefix --URDF file prefix</div>
<div class="line">./BenchHRM3D 1 snake 6 3 60.0 ${SOURCE_DIR}/config/demo/ ${SOURCE_DIR}/</div>
</div><!-- fragment --></li>
<li>3D Prob-HRM planner for articulated-body (ablated version, without "bridge C-slice" process): <code>BenchProbHRM3DAblation.cpp</code> <div class="fragment"><div class="line"># Parameters: --Num of trials --Num of trials --robot name --Num of sweep lines (x-direction) --Num of sweep lines (y-direction) --Max planning time (in seconds, default: 60.0s) --Configuration file prefix --URDF file prefix</div>
<div class="line">./BenchHRM3DAblation 1 snake 6 3 60.0 ${SOURCE_DIR}/config/demo/ ${SOURCE_DIR}/</div>
</div><!-- fragment --></li>
<li>3D OMPL planner for rigid-body: <code>BenchOMPL3D.cpp</code> <div class="fragment"><div class="line"># Parameters: --Num of trials --Planner start ID --Planner end ID --Sampler start ID --Sampler end ID --Max planning time (in seconds, default: 60.0s) --Configuration file prefix</div>
<div class="line">./BenchOMPL3D 1 0 5 0 4 60.0 ${SOURCE_DIR}/config/demo/</div>
</div><!-- fragment --></li>
<li>3D OMPL planner for articulated-body: <code>BenchOMPL3DArticulated.cpp</code> <div class="fragment"><div class="line"># Parameters: --Num of trials --Planner start ID --Planner end ID --Sampler start ID --Sampler end ID --Max planning time (in seconds, default: 60.0s) --Configuration file prefix</div>
<div class="line">./BenchOMPL3D 1 0 5 0 4 snake 60.0 ${SOURCE_DIR}/config/demo/ ${SOURCE_DIR}/</div>
</div><!-- fragment --></li>
</ul>
<p ><b>Note</b>:</p><ul>
<li>The configuration file path prefix in the examples is for demonstration, and you could specify the folder path that stores the configuration files as your preference.</li>
<li>The SO(3) samples can be specified based on the generating methods. In the resources folder, we provide two methods: (1) "q_icosahedron_60": 60 samples from icosahedral symmetry group (as described in paper); (2) "q_hopf_": different numbers of samples using Hopf fibration.</li>
<li>The URDF file prefix is set by default as the source directory. The script will search under relative path: "${SOURCE_DIR}/resources/3D/urdf/${robot_name}.urdf". If you have your own robot URDF file, please put into the correct folder or setup correct relative path.</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
Visualizations</h2>
<p >After running test or benchmark files, parameters for visualization will be generated in the "/bin" folder. Visualization scripts are all in Matlab:</p><ul>
<li>Plot 2D results: <code>/matlab/tests/plot_results_2D.m</code></li>
<li>Plot 2D Highway RoadMap graph: <code>/matlab/tests/plot_results_graph_2D.m</code></li>
<li>Plot 3D results: <code>/matlab/tests/plot_results_highway_3D.m</code></li>
<li>Plot 3D OMPL planners results: <code>/matlab/tests/plot_results_ompl_3D.m</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Status</h1>
<h2><a class="anchor" id="autotoc_md12"></a>
Highway RoadMap planner</h2>
<ol type="1">
<li>SE(2) single rigid body cases:</li>
</ol>
<ul>
<li>Fixed number of layers and sweep lines.</li>
<li>Layer connections using KC (<code>src/planners/HighwayRoadMap.cpp</code>) and TFE (<code>src/planners/HighwayRoadMap2d.cpp</code>).</li>
</ul>
<ol type="1">
<li>SE(3) single/multi rigid body cases:</li>
</ol>
<ul>
<li>Single body (<code>src/planners/HighwayRoadMap3d.cpp</code>): fixed number of layers and sweep lines.</li>
<li>Multi body: fixed (<code>src/planners/Hrm3DMultiBody.cpp</code>) / adaptive (<code>src/planners/Hrm3DMultiBodyAdaptive.cpp</code>) number of layers, fixed sweep lines.</li>
<li>Layer connections using TFE.</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
OMPL sampled-based planners</h2>
<ol type="1">
<li>SE(3) single/multi rigid body:</li>
</ol>
<ul>
<li>Benchmark: <code>/test/benchmark/BenchOMPL3D.cpp</code></li>
</ul>
<ol type="1">
<li>Articulated body:</li>
</ol>
<ul>
<li>Benchmark: <code>/test/benchmark/BenchOMPL3DArticulated.cpp</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Benchmark in different scenerios</h2>
<ul>
<li>Sparse map</li>
<li>Cluttered map</li>
<li>Maze map</li>
<li>Home environment map</li>
<li>Narrow map</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Demonstration using real robot in a lab environment</h2>
<ol type="1">
<li>Verified the algorithm in real robot, i.e. project the NAO humanoid robot to the plane, and plan a trajectory.</li>
</ol>
<h1><a class="anchor" id="autotoc_md16"></a>
Related Papers</h1>
<p >"Ruan, S., Ma, Q., Poblete, K.L., Yan, Y. and Chirikjian G.S., 2018, December. Path Planning for Ellipsoidal Robots and General Obstacles via Closed-Form Characterization of Minkowski Operations. WAFR 2018."</p>
<p >"Yan, Y., Ma, Q. and Chirikjian, G.S., 2016, October. Path Planning Based on Closed-Form Characterization of Collision-Free Configuration-Spaces for Ellipsoidal Bodies, Obstacles, and Environments. In Proc. Int. Workshop Robot Learn. Plan. (pp. 13-19)."</p>
<p >"Yan, Y. and Chirikjian, G.S., 2015. Closed-form characterization of the Minkowski sum and difference of two ellipsoids. Geometriae Dedicata, 177(1), pp.103-128."</p>
<p >"Ruan, S., Ding, J., Ma, Q. and Chirikjian, G.S., 2019. The Kinematics of Containment for N-Dimensional Ellipsoids. Journal of Mechanisms and Robotics, 11(4), p.041005."</p>
<p >"Ruan, S., Ding, J. and Chirikjian, G.S., 2018. Lower Bounds of the Allowable Motions of One N-Dimensional Ellipsoid Contained in Another. ASME IDETC 2018."</p>
<p >"Ma, Q. and Chirikjian, G.S., 2015, August. A Closed-Form Lower Bound on the Allowable Motion for an Ellipsoidal Body and Environment. ASME IDETC 2015."</p>
<p >"Chirikjian, G.S. and Yan, Y., 2014. The Kinematics of Containment. In Advances in Robot Kinematics (pp. 355-364). Springer International Publishing." </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
